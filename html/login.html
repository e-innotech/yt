<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>登陆</title>
    <link rel="stylesheet" href="../css/login.css"/>
    <link rel="stylesheet" href="../common/css/index.css"/>
    <script src="../common/js/common.js"></script>
    <script src="../common/js/jquery.min.js"></script>
    <script src="../common/js/common.js"></script>
</head>
<body id="body">
<div id="box">
    <form id="jvForm" method="post" style="width:100%;" novalidate="novalidate">
        <div class="login-index">
            <div class="login-index-box">
                <div class="login-logo">后台管理系统</div>
                <span id="text1"></span>
                <div class="login-text">
                    <!--<div class="username-con"><i></i><input type="text" onfocus="f1()" onblur="f2()" id="username" name="username"  class="username" placeholder="手机号登陆"></div>-->
                    <div class="username-con"><i></i>
                        <input type="text" name="userName" class="username" placeholder="手机号码" maxlength="11">
                        <span style="position:absolute;top:-16px;left:5px;width: 100%;"></span>
                    </div>
                    <div class="password-con"><i></i>
                            <input type="password" name="password" class="password" placeholder="密码">
                            <span style="position:absolute;top:40px;left:5px;width: 100%;"></span>
                    </div>
                    <!--<div class="password-con"><i></i><input type="password" onfocus="f3()" onblur="f4()" id="password" name="password" class="password" placeholder="密码"></div>-->
                </div>
                <div class="login-submit" style="border:none;">
                    <input type="button" value="登 录"  id="login">
                </div>
                <div style="height:0; clear:both;"></div>
            </div>
        </div>
    </form>
</div>
</body>
<script src="../common/js/common.js"></script>
<script>
    //验证
    userName();
    passwords();


    //点击登录按钮时获取姓名的值，发送ajax请求，将用户名的值作为上送数据
//    循环和json数据做对比，如果json中有则是已被注册，否则注册成功
    $(function (){
        //点击登录按钮时
        $("#login").click(function (){
            //获取用户名文本框的值
            var username=$(".username").val();
            localStorage.setItem('xinxi',username);
            alert(localStorage.getItem('xinxi'));
//            var username=$(name="userName").val()
            $.ajax({
                type: "get",
                url:"demo1.json",
                async: true,
                timeout: 15000,
                data:{userName:username},
                success: function(data) {
                    console.log(username)
                    for(var i=0;i<data.length;i++){
                       // console.log(data[i].userName);
                        if(username==data[i].userName){
                            alert("登录成功");
                            window.location.href=localStorage.getItem('xinxi')+".html";
                            return false;
                        }
                    }
                    alert("登录失败")
                }
            });
        });
    });
</script>

</html>

