<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>稿件管理</title>
    <link rel="stylesheet" href="../common/css/bootstrap.min.css"/>
    <link rel="stylesheet" href="../common/css/index.css"/>
    <link rel="stylesheet" href="../css/list.css"/>
    <!--编辑css-->
    <link rel="stylesheet" href="../kindeditor/themes/default/default.css"/>
    <link rel="stylesheet" href="../kindeditor/plugins/code/prettify.css"/>
    <script type="text/javascript" src="../common/js/jquery.min.js"></script>
    <script type="text/javascript" src="../common/js/common.js"></script>

    <script type="text/javascript" src="../common/js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../js/pager.js"></script>
    <!--编辑内容的-->
    <!--kindeidtor-core&language.js-->
    <script charset="utf-8" src="../kindeditor/kindeditor-all-min.js"></script>
    <script charset="utf-8" src="../kindeditor/lang/zh-CN.js"></script>
    <!--kindeidtor-eidtor-plugin-->
    <script charset="utf-8" src="../kindeditor/plugins/code/prettify.js"></script>
    <style>
        .modal_conment{
            padding: 20px 0;
            clear: both;
        }
        .modal_conment label{
            line-height: 40px;
            text-align: right;
        }
    </style>
</head>
<body>
<div>
    <iframe src="../common/html/header.html" frameborder="0" width="100%" height="50"></iframe>
</div>
<div class="clearfix fl">
    <iframe src="../common/html/list.html" frameborder="0" height="924"></iframe>
</div>
<div class="fl wrapper wrapper-content system" style="margin: 80px 0 0 50px;width: 75%;">
    <input type="button" value="增加" class="addModal" onclick="add(this)"/>
    <input type="text" class="btn_find"/><input type="button" value="查找"/>
    <div class="list_1 row">
        <table class="col-sm-12 table table-bordered table-hover">
            <thead>
            <tr>
                <th>ID</th>
                <th>稿件标题</th>
                <th>稿件内容</th>
                <th>稿件出处来源</th>
                <th>静态页地址</th>
                <th>稿件状态</th>
                <th>上下线状态</th>
                <th>审核人</th>
                <th>稿件提交人</th>
                <th>审批描述</th>
                <th>操作</th>
            </tr>
            </thead>
            <tbody>

            </tbody>
        </table>
    </div>
    <!--分页-->
    <div>
        <ul class="pagination fr page1"></ul>
    </div>

</div>

<!--添加弹出框-->
<div class="modal fade add" id="addmyModal" tabindex="-1"  aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10%;left: 30%; ">
    <div class="modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <!--
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                -->
                <h4 class="modal-title" id="myModalLabel" >新增</h4>
            </div>
            <div class="modal-body" style="overflow: hidden;">
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件标题</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 news_title"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <div class="form-group easel">
                        <label class="control-label write-label pull-left col-sm-3">稿件内容</label>

                        <div class="pull-right col-sm-9">
                            <textarea id="comment_data" name="content" class="textarea news_content" rows="7" style="width: 77%"></textarea>
                        </div>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件出处来源</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 source"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件静态页面地址</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 staticUrl"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件提交人</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 submit_user_id"/>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default btn2" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary btn1">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>
<!--审核弹出框-->
<div class="modal fade audit" id="auditmyModal" tabindex="-1"  aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10%;left: 30%; ">
    <div class="modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <!--
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                -->
                <h4 class="modal-title" id="auditmyModalLabel" >审核</h4>
            </div>
            <div class="modal-body" style="overflow: hidden;">
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">ID</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 id"/>
                    </div>
                </div>

                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">审核状态</label>

                    <div class="col-sm-7">
                        <div class="btn-group">

                            <select name="num" id="num" onchange="changNum(this.value)">
                                <option value="province" >发布</option>
                                <option value="province" >待审核</option>
                                <option value="province" >待修改</option>
                            </select>
                        </div>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">审核描述</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 aduit_des"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">审核人</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 aduit_user_id"/>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default btn2" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary btn1">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>

<!--编辑弹出框-->
<div class="modal fade edit" id="editmyModal" tabindex="-1"  aria-labelledby="myModalLabel" aria-hidden="true" style="top: 10%;left: 30%; ">
    <div class="modal-lg">
        <div class="modal-content">
            <div class="modal-header">
                <!--
                                <button type="button" class="close" data-dismiss="modal" aria-hidden="true">×</button>
                -->
                <h4 class="modal-title" id="editmyModalLabel" >编辑</h4>
            </div>
            <div class="modal-body" style="overflow: hidden;">
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">ID</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 id"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">新稿件标题</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 news_title"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <div class="form-group easel">
                        <label class="control-label write-label pull-left col-sm-3">稿件内容</label>

                        <div class="pull-right col-sm-9">
                            <textarea id="editcomment_data" name="content" class="textarea news_content" rows="7" style="width: 77%"></textarea>
                        </div>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件出处来源</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 source"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件静态页面地址</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 staticUrl"/>
                    </div>
                </div>
                <div class="form-group modal_conment">
                    <label class="col-sm-3 control-label">稿件提交人</label>

                    <div class="col-sm-7">
                        <input class="form-control input1 submit_user_id"/>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-default btn2" data-dismiss="modal">关闭</button>
                <button type="button" class="btn btn-primary btn1">确认</button>
            </div>
        </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
</div>


<script type="text/javascript">

    //发送ajax请求，拿到数据并渲染到页面上
    $(document).ready(function () {setTimeout(function () {}, 500);
        //网站管理基本信息
        $.ajax({
            type: "get",//请求方式
            //url:"http://192.168.20.195:8080/user/query",//请求路径
            url: "news.json",//请求路径
            async: false,
            dataType: "json", //数据格式
            success: function (data) {
//                console.log(resultdata);
//                console.log(resultdata[0]);
                for (var i = 0; i < data.length; i++) {
                    str = "<tr>" +
                    "<td>" + data [i].id + "</td>" +
                    "<td>" + data[i].news_title + "</td>" +
                    "<td width='20%'>" + data[i].content + "</td>" +
                    "<td>" + data[i].source + "</td>" +
                    "<td>" + data[i].staticUrl + "</td>" +
                    "<td>" + data[i].status + "</td>" +
                    '<td><p class="' + (data[i].isLine == 0 ? 'anniu' : 'anniu active') + '" style="margin: 0 auto;" onclick="anniu(this)"><span> </span></p></td>' +  //+ resultdata[i].isUse +
                    "<td>" + data[i].aduit_user_id + "</td>" +
                    "<td>" + data[i].submit_user_id + "</td>" +
                    "<td>" + data[i].aduit_des + "</td>" +
                    "<td align='center'>" +
                    "<input type='button' value='编辑'  style='margin: 0 20px' onclick='edit()'/>" +
                    "<input type='button' value='审批'  style='margin: 0 20px' onclick='audit()'/>" +
                    "<input type='button' value='发布'  style='margin: 0 20px'/>" +
                    "</td>" + "</tr>";
                    $("tbody").append(str);

                }

            }
        });

        /*分页*/
        Page({
            num: 100,					//页码数
            startnum: 1,				//指定页码
            elem: $('.page1'),		//指定的元素
            callback: function (n) {	//回调函数
                console.log(n);
            }
        });




    });



</script>
<script>
    var editor;
    KindEditor.ready(function(K) {
        editor = K.create('textarea[name="content"]', {
            newlineTag : "br",
            resizeType : 2,
            allowPreviewEmoticons : true,
            allowImageUpload : true,
            minHeight:"100px",
            autoHeightMode : false,
            afterCreate : function() {
                this.loadPlugin('autoheight');
            },
            items : [
                'fullscreen', 'source' , 'table',
                'insertfile', 'link' , 'image' , 'emoticons' , '|' , 'forecolor', 'hilitecolor', 'bold' ,'underline', 'removeformat', '|' ,
                'justifyleft', 'justifycenter', 'justifyright', 'preview']
        });
    });
</script>
</body>
</html>