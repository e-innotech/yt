<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>登陆</title>
    <link rel="stylesheet" href="../../css/list.css"/>
    <script src="https://s.ssl.qhres.com/static/6d694f8071623fb4/lib/jquery/jquery.js"></script>
</head>
<body id="body">
<div id="box">
    <form id="jvForm" method="post" style="width:100%;" novalidate="novalidate">
        <div class="login-index">
            <div class="login-index-box">
                <div class="login-logo">后台管理系统</div>
                <span id="text1"></span>

                <div class="login-text">
                    <!--<div class="username-con"><i></i><input type="text" onfocus="f1()" onblur="f2()" id="username" name="username"  class="username" placeholder="手机号登陆"></div>-->
                    <div class="username-con"><i></i>
                        <input type="text" name="userName" class="username" placeholder="手机号码" maxlength="11">
                        <span style="position:absolute;top:-16px;left:5px;width: 100%;"></span>
                    </div>



                    <div class="password-con"><i></i>
                            <input type="password" name="password" class="password" placeholder="密码">
                            <span style="position:absolute;top:40px;left:5px;width: 100%;"></span>

                    </div>
                    <!--<div class="password-con"><i></i><input type="password" onfocus="f3()" onblur="f4()" id="password" name="password" class="password" placeholder="密码"></div>-->
                </div>
                <div class="login-submit" style="border:none;">
                    <input type="button" name="submit" value="" style="border:0px none;" id="login">
                </div>
                <div style="height:0; clear:both;"></div>
            </div>
        </div>
    </form>
</div>
</body>
<script src="../../js/common.js"></script>
<script>
    //验证
    $("input").focus(function () {
        userName();
        password();
    });

   /* doAjax("get", "../demo1.json", false, "", function(){

    });*/
    $(function (){
        $("#login").click(function (){
            var username=$(name="userName").val()
            $.ajax({
                type: "get",
                url:"../demo1.json",
                async: true,
                timeout: 15000,
                data:{userName:username},
                beforeSend: function(xhr) {   //beforeSend定义全局变量
                    xhr.setRequestHeader("If-Modified-Since", "0");  //If-Modified-Since HTTP请求头标签,即比较浏览器缓存页面时间
                },
                success: function(xmlDoc, textStatus, xhr)
                {
                    if(xhr.readyState==4)
                    {
                        if(xhr.status == 200)
                        {
                            var str=xhr.responseText; //获取返回值
                            if (str==0){ //查询返回0表示已注册
                                alert("已被注册")
                                return;
                            }
                            else{
                                //运行正确的代码
                                alert("可以正常注册")
                            }
                        }
                    }
                }
            });
        });
    });


    /*
     var str1;
     var str2;


     //当用户框获取焦点时
     function f1(){
     $("#text1").html("请输入用户名");
     return false
     }

     function f2(){
     str1=$("#username").val();
     //    手机号
     var reg1 = /^1[3|4|5|7|8][0-9]\d{4,8}$/;
     if(str1==""){
     $("#text1").html("用户名为空");
     return false;
     }
     if(reg1.test(str1)==false){
     $("#text1").html("请输入正确的手机号码");
     return false;
     }
     $("#text1").html("ok");
     return true;
     }

     // 密码框获取焦点时
     function f3(){
     $("#text1").html("请输入密码");
     return false;
     }
     //当密码框失去焦点时
     function f4(){
     str2=$("#password").val();
     var reg2=/^[a-zA-Z]\w{5,15}$/;//字母开头 大于最少6位数 最大16位数的密码
     if(str2==""){
     $("#text1").html("密码为空");
     return false;
     }
     if (reg2.test(str2)==false){
     $("#text1").html("请输入6-16位数的密码")
     return false;
     }
     $("#text1").html("ok");
     return true
     }
     //点击登陆按钮时
     $("#login").click(function(){
     f2();
     f4();
     if(f2()==true && f4()==true){
     location.href="../index.html";
     str1.val("");
     str2.val("");
     }
     })

     */


</script>
</html>

