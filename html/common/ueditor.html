<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>页面编辑</title>
    <link rel="stylesheet" href="../../css/bootstrap.min.css"/>
<!--
    <link rel="stylesheet" href="../../css/index.css"/>
-->
    <link rel="stylesheet" href="../../css/list.css"/>
    <link rel="stylesheet" href="../../css/advertising.css"/>
    <script type="text/javascript" src="../../js/jquery.min.js"></script>
    <script type="text/javascript" src="../../js/bootstrap.min.js"></script>
    <script type="text/javascript" src="../../js/pager.js"></script>
    <link href="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.css" rel="stylesheet">
    <script src="http://cdnjs.cloudflare.com/ajax/libs/summernote/0.8.8/summernote.js"></script>
    <script src="http://cdn.bootcss.com/summernote/0.8.4/lang/summernote-zh-CN.js"></script>

    <style>
        .table tbody > tr {
            border: 1px solid #ddd;
        }
    </style>

</head>
<body>

<div>
    <table class="table">
        <tbody width="90%"  cellpadding="2" cellspacing="0" border="0" style="margin: 50px 100px">
        <tr>
            <td width="10%">
                栏目:
            </td>
            <td colspan="3" width="40%">
                <div class="fl">
                    <select name="channelId" style="float:left;" class="valid">
                        <option value="" class="sel-disabled">--请选择--</option>
                        <option value="75" selected="selected">新闻</option>
                        <option value="78" class="sel-disabled">下载</option>
                        <option value="92">&nbsp;&nbsp;&gt;精品推荐</option>
                        <option value="90">&nbsp;&nbsp;&gt;系统软件</option>
                        <option value="91">&nbsp;&nbsp;&gt;媒体助手</option>
                        <option value="93">&nbsp;&nbsp;&gt;游戏娱乐</option>
                        <option value="77">视频</option>
                        <option value="76">图库</option>
                        <option value="79">招聘</option>
                        <option value="81">文库</option>
                    </select>
                </div>
                <div style="float:left;padding-left:20px;">
                    <span style="float:left; line-height:24px;">是否关联专题:</span>
                    <span id="topics" style="float:left; margin-left:10px;">
                        <select name="topicIds">
                            <option value="0">不关联</option>
                            <option value="1">饲料英才网络招聘会</option>
                            <option value="3">2015全国两会</option>
                            <option value="2" selected="selected">互联网+</option>
                        </select>
                    </span>
                </div>
            </td>
        </tr>
        <tr>
            <td width="10%">
                标题:
            </td>

            <td colspan="0">
                <div class="fl">
                    <input type="text" maxlength="150"><label><input type="checkbox">外部链接</label>
                </div>
                <div class="fl" style="display: block;">url: <input type="text" id="link" name="link" title="内容外部链接地址"
                                                                    value="" size="35" maxlength="255"></div>
            </td>
        </tr>
        <tr>
            <td width="10%">简短标题:</td>
            <td width="40%">
                <input type="text"/>
                <span>在列表中显示，留空则显示完整标题</span>
            </td>
            <td width="10%">
                标题颜色:
            </td>
            <td width="40%" colspan="1">
                <input type="text"/>
                <input type="text"/>
                <input type="radio"/>加粗
                <span>在列表中的样式</span>
            </td>
        </tr>
        <tr>
            <td width="10%">Tag标签:</td>
            <td>
                <input type="text"/>
                <span>用","分开</span>
            </td>
            <td></td>
            <td></td>

        </tr>
        <tr>
            <td width="10%">摘要:</td>
            <td>
                <textarea name="description" id="" cols="70" rows="3"></textarea>
            </td>
        </tr>
        <tr>
            <td width="10%">作者:</td>
            <td><input type="text"/></td>
            <td>来源:</td>
            <td><input type="text"/>url: <input type="text" maxlength="255"/></td>
        </tr>
        <tr>
            <td width="10%">浏览权限:</td>
            <td>
                <input type="radio" checked/>普通会员
                <input type="radio"/>VIP
            </td>
        </tr>
        <tr>
            <td>固顶级别:</td>
            <td><input type="text" placeholder="10"/></td>
            <td>固定到期日期:</td>
            <td><input class="calendar" type="text" placeholder="当天"/></td>

        </tr>
        <tr>
            <td>排序时间:</td>
            <td class=""><input class="calendar" type="text" placeholder="当天"/></td>
        </tr>
        <tr>
            <td>发布时间:</td>
            <td><input class="calendar" type="text" placeholder="当天"/></td>
            <td>归档时间:</td>
            <td><input class="calendar" type="text" placeholder="当天"/></td>
        </tr>
        <tr>
            <td>内容类型:</td>
            <td>
                <select name="typeId" class="valid">
                    <option value="1" selected="selected">普通</option>
                    <option value="2">图文</option>
                    <option value="3">焦点</option>
                    <option value="4">头条</option>
                </select>
                <input type="radio"/>推荐
                <input type="radio"/>草稿
            </td>
            <td>指定模板:</td>
            <td>
                <select name="tplContent">
                    <option value="1" selected="selected">默认</option>
                    <option value="2">/default/content/news2.html</option>
                    <option value="3">/default/content/news2.html</option>
                </select>
            </td>
        </tr>
        <tr>
            <td>是否收费:</td>
            <td>
                <input type="radio" value="免费" name="costType" checked/>免费
                <input type="radio" value="收费" name="costType"/>收费
                <input type="radio" value="打赏" name="costType"/>打赏
            </td>
            <td>附件:</td>
            <td><input type="file"/></td>
        </tr>
        <tr>
            <td>多媒体:</td>
            <td><input type="text" placeholder="12"/><input type="file"/></td>
            <td>播放器:</td>
            <td>
                <input type="radio" value="WM" name="mediaType" checked/>WM
                <input type="radio" value="REAL" name="mediaType"/>REAL
                <input type="radio" value="FLV" name="mediaType"/>FLV
                <input type="radio" value="FLASH" name="mediaType"/>FLASH
                <input type="radio" value="CK" name="mediaType"/>CK
            </td>
        </tr>

        </tbody>

    </table>
    <span>内容:</span>
    <div id="summernote"></div>


</div>

<script type="text/javascript">


    //加载编辑器
    $(document).ready(function () {
        $('#summernote').summernote({
            minHeight: 300,
            focus: true,
            lang: 'zh-CN',
            // 重写图片上传
            onImageUpload: function (files, editor, $editable) {
                sendFile(files[0], editor, $editable);
            }
        });
    });
    //图片上传
    function sendFile(file, editor, $editable) {

        var filename = false;
        try {
            filename = file['name'];
        } catch (e) {
            filename = false;
        }
        if (!filename) {
            $(".note-alarm").remove();
        }

        //以上防止在图片在编辑器内拖拽引发第二次上传导致的提示错误
        data = new FormData();
        data.append("file", file);
        data.append("key", filename); //唯一性参数

        $.ajax({
            data: data,
            type: "POST",
            url: "",
            cache: false,
            contentType: false,
            processData: false,
            success: function (url) {
                if (url == '200') {
                    alert("上传失败！");
                    return;
                } else {
                    alert("上传成功！");
                }
                //alert(url);
                editor.insertImage($editable, url);
                //setTimeout(function(){$(".note-alarm").remove();},3000);
            },
            error: function () {
                alert("上传失败！");
                return;
                //setTimeout(function(){$(".note-alarm").remove();},3000);
            }
        });
    }

</script>
</body>
</html>