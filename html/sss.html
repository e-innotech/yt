<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>

    <link href="pagination.css" rel="stylesheet" type="text/css" />


    <script src="jquery.pagination.js" type="text/javascript"></script>
</head>
<body>
<div class="box"></div>
<script>
    var orderby = "order by id_t";
    $(document).ready(function() {
        initData(0);
    });
    //翻页响应
    function pageselectCallback(page_id, jq) {
        initData(page_id);
    }

    function initData(pageindx) {
        var tbody = "";
        var pageCount = "";
        var hasPreviousPage;
        $.ajax({
            type : "get",//用POST方式传输
            dataType : "json",//数据格式:JSON
            //url : 'http://192.168.20.195:8080/user/query',//目标地址
            url:"page.json",
            contentType : "application/json",
            async : false,//作用是防止在ajax成功调用之前就调用$("#Pagination").pagination,这个时候数据个数还没有初始化
            data : "pageNum=" + (pageindx+1) + "&pageSize=3&userName=",
            beforeSend : function() {
                $("#divload").show();
                $("#Pagination").hide();
            },//发送数据之前
            complete : function() {
                $("#divload").hide();
                $("#Pagination").show();
            },//接收数据完毕
            success : function(json) {
                $("#productTable tr:gt(0)").remove();
                var productData = json.list;
                pageCount = json.total;
                hasPreviousPage = json.hasPreviousPage;
                $.each(
                        productData,
                        function(i, n) {
                            var trs = "";
                            trs += "<tr><td align='center'>"
                            + n.id
                            + "</td><td align='center'>"
                            + n.userName
                            + "</td><td align='center'>"
                            + n.createDate
                            + "</td><td align='center'>"
                            + n.isUse
                            + "</td><td align='center'><a href=\"javascript:edit('')\">编辑</a>&nbsp;&nbsp;<a href=\"javascript:view('')\">查看</a></td></tr>";
                            tbody += trs;
                        });

                $("#productTable").append(tbody);
                //行交替颜色
                $("#productTable tr:gt(0):odd").attr("class", "");
                $("#productTable tr:gt(0):even").attr("class", "");
            }//end of success
        });
        if (pageCount != 0) {
            $("#Pagination").pagination(
                    pageCount,
                    {
                        callback : pageselectCallback,
                        prev_text : '<< 上一页',
                        next_text: '下一页 >>',
                        items_per_page : 3, // pageSize
                        num_display_entries : 6, // 连续分页主体部分显示的分页条目数
                        current_page : pageindx,
                        num_edge_entries : 2
                    });
        }
    }
</script>
</body>
</html>