<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title>头部</title>
    <link rel="stylesheet" href="../css/style.css"/>
    <link rel="stylesheet" href="../css/top.css">
    <script src="../script/jquery.min.js"></script>

</head>
<body>
<!-- 以下为头部 -->
<div class="headerbg">
    <div class="header">
        <img src="../images/logo.png"/>
        <ul class="nav">

        </ul>
        <div class="header-right">
            <div class="header-right-l">
                <form>
                    <input type="text" placeholder="搜索"/>
                    <a href="#"><img src="../images/search.png" id="search"/></a>
                </form>
            </div>
            <div class="header-right-r">
                <a href="https://www.baidu.com/"><img src="../images/ren.png" id="userAvatar"/></a>
            </div>
        </div>
    </div>
</div>
<div class="blank"></div>


</body>
</html>

<script>

//    //导航栏的数据
//判断是不是首次进入，如果是发送ajax请求，请求数据且渲染页面，并存在session中 否则不是首次就调用缓存里的数据
    if(typeof(JSON.parse(sessionStorage.getItem("channel")))=="undefined"){
      console.log(22222);
//       var channels= JSON.parse(localStorage.getItem("channel"));
//        console.log(2222222,channels);
//        console.log(5555555,typeof(channels))
//        for(var i=0;i<channels.length;i++){
//            $(".header .nav").append('<li><a> ' + channels[i].channelName + ' </a></li>');
//        }
    }else{
        console.log(1111111111)
            $.ajax({
                url:"../data/nav.json",
                dataType:"json",
                async:true,
                type:"get",
                success:function(navData){
                    var navdata=navData.data.channels;
                    for(var i=0;i<navdata.length;i++) {
                        $(".header .nav").append('<li><a>'+navdata[i].channelName +
                        ' </a></li>');
                    }
                    sessionStorage.setItem("channel",JSON.stringify(navdata));
                    var channels= JSON.parse(sessionStorage.getItem("channel"));
                    console.log(2222222,channels)
                }
            })
    }

window.onload=function(){
    $(".nav").on("click","li",function(){
        $(this).addClass("active").siblings().removeClass("active");

    })
}







</script>