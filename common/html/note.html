<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">

    <meta name="viewport" content="width=device-width" />
    <title>BootStrap Table使用</title>
    <script src="../js/jquery.min.js"></script>

    <script src="../js/bootstrap.min.js"></script>
    <link href="../css/bootstrap.min.css" rel="stylesheet" />

    <script src="../js/bootstrap-table.js"></script>
    <link href="../css/bootstrap-table.css" rel="stylesheet" />
    <script src="../js/bootstrap-table-zh-CN.js"></script>

    <script src="../js/index.js"></script>
    <style>
       p{
           width: 200px;
           background: #ff0000;
           word-break: break-all;
           text-overflow: ellipsis;
           display: -webkit-box; /** 对象作为伸缩盒子模型显示 **/
           -webkit-box-orient: vertical; /** 设置或检索伸缩盒对象的子元素的排列方式 **/
           -webkit-line-clamp: 3; /** 显示的行数 **/
           overflow: hidden;  /** 隐藏超出的内容 **/
       }
    </style>
</head>
<body>
<div class="panel-body">
    <table id="tbList" class="table footable" data-sort="false" >
        <thead>
        <tr class="primary">
            <th class="tar">序号</th>
            <th>类型</th>
            <th>商品显示名称</th>
            <th>商品编码</th>
            <th>规格</th>
            <th>生产厂商</th>
            <th>限购个数</th>
            <th>原价</th>
            <th>优惠价</th>
            <th>特价</th>
            <th>所属药店</th>
            <th>选择</th>
            <th>操作</th>
            <th class="hidden">特价ID</th>
        </tr>
        </thead>

        <tbody id="tabproInfo"></tbody>
        <script id="tmidtabproduct" type="text/x-jsrender">
        {{for thproductlist}}
        <tr id="tabpro" >
            <td class="tar"><lable id="idindex">{{>#index+1}}</lable></td>
            <td id="{{>tabtype}}"><lable id="idtabtype" value="{{>tabtype}}">{{tabTypeText:tabtype}}</lable></td>
            <td><lable id="iddispname">{{>dispName}}</lable></td>
            <td><lable id="idproductCode">{{>productCode}}</lable></td>
            <td><lable id="idspec">{{>spec}}</lable></td>
            <td><lable id="idmanufactor">{{>manufactor}}</lable></td>
            <td><lable id="idinta">{{>inta}}</lable></td>
            <td><lable id="idprice">{{>price}}</lable></td>
            <td><lable id="idyhprice">{{>yhprice}}</lable></td>
            <td><lable id="idthprice">{{>thprice}}</lable></td>
            <td><lable id="idsupplierName">{{>supplierName}}</lable></td>
             <td>
              <div class="col-xs-3"  >
                    <input type="radio" id="idradio" name="radiobutton"  value="{{>idproductTab}}">
                   </div>
                 </td>
            <td><a href="#" onClick="deletetabpro2()">删除</a>
               <a href="#"  onClick="modifytabpro2({{>#index+1}},'pop-div')">修改</a>
            </td>
            <td class="hidden"><lable id="ididproductTab">{{>idproductTab}}</lable></td>
        </tr>
        {{/for}}

        </script>
    </table>
</div>

<!--<input type="button" id="btnPopup" onclick="popupDiv('pop-div')" class="btnPopup" value="PopupDiv">-->
<div  class="pop-box " style="width: 350px" id="pop-div">
    <span class="panel-title ml5 mt10">你修改商品的是:</span>
    <b class="ml20"><lable id="idnewdispname3" value=""></lable></b>
    <table class="style1 mt10 ml10">
        <tr class=" mt10 ">
            <td class="style2 ">请选择特惠类型:</td>
            <td>
                <select class="form-control mt10 mr10" id="tabtypeSelect3" style="width:190px">
                    <option value="0">(请选择)</option>
                    <option value="1">特惠</option>
                    <option value="2">商家推荐</option>
                </select>
            </td>
        </tr>
        <tr class="mt10  ">
            <td class="style2">请输入限购数量:</td>
            <td>
                <input type="text" placeholder="不填默认为1" style="height:38px" class="mt10 mr10"
                       onkeyup="clearNoNum2(this)" id="idnewinta3" size="24" value="">
            </td>
        </tr>
        <tr class="mt10  ">
            <td class="style2"> 请输入新的特价:</td>
            <td>
                <input type="text"  style="height:38px" class="mt10 mr10" onkeyup="clearNoNum(this)"
                       id="idnewthprice3"  size="24" value="">
            </td>
        </tr>
    </table>
    <br />
    <input class="ml10 pull-left" value="保存" id="btnsave" onClick="savetabpro('pop-div');" type="button"/>
    <input class="mr20 pull-right" value="取消" id="btnClose" onClick="hideDiv('pop-div');" type="button"/>
</div>


</body>
</html>

<script>
    /**修改按钮，弹出div
     * */
    function modifytabpro2(index, div_id) {
        var idproductTab = $('input:radio:checked').val();
        if (idproductTab == null || idproductTab == "") {
            alert("请选择一个特价商品！");
            return;
        }
//获取表格里的值
        var _tab = document.getElementById('tbList');// 获取table对象
        var _row = _tab.rows; //获取选中table的行
        var _cell = _row[index].cells; //获取选中列
        var tabtype = _cell[1].id;
        var xiangounum = _cell[6].innerText; //获取第7列的限购数量
        var thprice = _cell[9].innerText; //获取第10列的特价
        var dispname = _cell[2].innerText;
//alert(_cell[6].innerText);
//alert(_cell[9].innerText);

//值传递
//$("[id*=idnewdispname3]").attr("value", dispname);//原来的写法
//$("[id*=idnewthprice3]").attr("value", thprice);
        document.getElementById('idnewdispname3').innerText=dispname;
        $("#idnewthprice3").attr("value", thprice);
// $("#tabtypeSelect3").val("tabtype");
        $("#tabtypeSelect3").find('option[value="' + tabtype + '"]').attr("selected", true);
        $("#idnewinta3").val(xiangounum);

//$("[id*=idnewdispname]").attr("value",$("[id*=iddispname]").html());
//$("[id*=idnewinta3]").attr("value",$("[id*=idinta]").html());
//$("[id*=idnewthprice3]").attr("value",$("[id*=idthprice]").html());
//$("[id*=tabtypeSelect3]").attr("value",$("[id*=idtabtype]").html());

        var div_obj = $("#" + div_id);
        var windowWidth = document.documentElement.clientWidth;
        var windowHeight = document.documentElement.clientHeight;
        var popupHeight = div_obj.height();
        var popupWidth = div_obj.width();
        div_obj.css({"position": "absolute"})
                .animate({
                    left: windowWidth / 2 - popupWidth / 2,
                    top: windowHeight / 2 - popupHeight / 2,
                    opacity: "show"
                }, "show");

// $('#inputthprice2').removeClass('hidden');

    }

    //关闭弹出的DIV
    function hideDiv(div_id) {

        $("#" + div_id).animate({left: 0, top: 0, opacity: "hide"}, "slow");
    }


</script>

